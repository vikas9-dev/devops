# Linux

## 1. üöÄ Linux: Foundation of DevOps

Linux is the bedrock upon which DevOps practices stand. If you're serious about mastering DevOps, this section is absolutely essential - it's not optional.

If you're already a seasoned Linux administrator, feel free to skim through. But if you're not, it's time to level up. This section is designed to make you efficient. You'll learn a lot in a short amount of time.

Here‚Äôs what we‚Äôll cover:

### üîç What You‚Äôll Learn

- Introduction to Linux: What it is, and why it matters in IT and DevOps.
- Basic commands: Copying files, moving directories, navigating the filesystem, etc.
- File system fundamentals: Understanding Linux directory structure, file types, and text file management.
- Permissions: File permissions, ownership, and how to modify them.
- Filters & Redirection: Powerful tools every DevOps engineer should know.
- Users and Groups: Managing access and system users.
- Superuser privileges: What is `sudo`, and how to use it responsibly.
- Package management: Working with RPM, Debian, Yum, Apt, and more.
- Services and Processes: Managing services, background processes, and system monitoring.
- Server management: Setting up web and database servers.
- Hands-on commands every DevOps engineer should be fluent in.

We‚Äôll focus on four main areas: **commands, files, software, and servers**‚Äîskills that are non-negotiable for anyone serious about IT.

### a. üåê What is Open Source, and Why Linux?

When you hear "open source," you might think ‚Äúfree software.‚Äù But open source is so much more.

Open source means the **source code is freely available** to inspect, improve, and redistribute. This model invites collaboration from thousands of contributors across the globe, often resulting in better security, innovation, and faster progress than traditional closed development.

Linux is the most prominent example of an open source success story. In 1991, **Linus Torvalds** developed a Unix-like open source kernel‚Äîthe **Linux kernel**. Since then, the world has built entire operating systems around it.

Today, Linux powers everything from desktops to data centers, smartphones to supercomputers.

### b. üß† Key Principles of Linux

To understand Linux is to understand its design philosophy:

- **Everything is a file**: Including devices like keyboards, mice, and network interfaces.
- **Small, modular programs**: Each tool does one thing well. Combine them to perform complex tasks.
- **Avoiding captive interfaces**: GUI is optional. CLI is king, especially for automation and scripting.
- **Text-based configuration**: Settings are in simple text files, not buried in menus‚Äîperfect for automation.
- **Stability and flexibility**: You can fine-tune Linux to work exactly how you want it to.

### c.üí° Why Linux for DevOps?

Here‚Äôs why Linux dominates the DevOps and server space:

- It's open source with massive community support.
- Highly customizable and lightweight.
- Easily automatable compared to Windows.
- Considered more secure (though that‚Äôs a debated topic).
- Supports a wide range of hardware and platforms.
- Powers most of the world's servers‚Äîand yes, your Android phone too.

### d. üèóÔ∏è Linux Architecture: A Simple Overview

At a high level, Linux looks like this:

1. **Hardware** ‚Äì CPU, RAM, disk, network.
2. **Linux Kernel** ‚Äì Talks to hardware, manages resources.
3. **Shell** ‚Äì CLI interface to issue commands.
4. **Tools & Utilities** ‚Äì Like `ls`, `cat`, or even GUI tools like browsers.
5. **Users** ‚Äì People like you, using the system.

### e. üéØ Popular Linux Distros: Desktop vs Server

#### Desktop Linux

If you're trying Linux on your personal machine, consider:

- **Ubuntu** ‚Äì Most popular, user-friendly.
- **Linux Mint** ‚Äì Great for beginners.
- **Fedora**, **Debian**, **openSUSE**, **Arch** ‚Äì Each with its own philosophy and strengths.

We recommend **dual-booting** your laptop and using Linux as often as possible to build comfort.

#### Server Linux

In DevOps, server distros are more relevant:

- **Red Hat Enterprise Linux (RHEL)** ‚Äì Enterprise-grade, stable, and secure (not open source).
- **CentOS / AlmaLinux / Rocky Linux** ‚Äì Open source alternatives to RHEL.
- **Ubuntu Server** ‚Äì Open source, user-friendly, and very popular in cloud environments.
- **SUSE Enterprise Linux** ‚Äì Popular in some enterprise setups.

### f. üß© RPM vs DEB: Packaging Systems

Most Linux distros fall into two major packaging families:

- **RPM-based** (Red Hat, CentOS, Fedora, Amazon Linux)

  - Packages use `.rpm` extension
  - Install with `rpm`, `yum`, or `dnf`

- **Debian-based** (Ubuntu, Debian, Kali)
  - Packages use `.deb` extension
  - Install with `dpkg`, `apt`

Example:

- Ubuntu: `sudo dpkg -i google-chrome.deb`
- Red Hat: `sudo rpm -ivh google-chrome.rpm`

Each system has its own commands and tools, so being familiar with both is a huge plus in DevOps.

### g. üìÅ Understanding Linux Directory Structure

Let‚Äôs quickly look at some important directories:

| Path                 | Purpose                                                |
| -------------------- | ------------------------------------------------------ |
| `/root`              | Home directory of the root (admin) user                |
| `/home/user`         | Home directory for a normal user                       |
| `/bin`, `/usr/bin`   | User-level executable commands (e.g., `ls`, `cat`)     |
| `/sbin`, `/usr/sbin` | Admin-level commands (e.g., `useradd`, `rpm`)          |
| `/etc`               | Configuration files (network, services, users)         |
| `/tmp`               | Temporary files, often deleted on reboot               |
| `/boot`              | Kernel and bootloader files                            |
| `/var`, `/srv`       | Variable data like logs, website files, database files |
| `/lib`, `/usr/lib`   | Libraries used by commands and software                |
| `/media`, `/mnt`     | Mount points for USB drives or CDs                     |
| `/proc`, `/sys`      | Virtual files with system and kernel info              |

---

## 2. üêß Linux Basic Commands and File System

Before we dive into Linux internals, let's start with the basics: how to work inside a Linux VM, run essential commands, and understand the Linux file system layout.

### ‚úÖ Starting the Vagrant VM

Ensure your CentOS-based Vagrant VM is ready. To check the status of all Vagrant-managed machines:

```bash
vagrant global-status
```

Navigate to the folder where your CentOS VM was created:

```bash
cd vagrant-vm/centos/
```

Start the VM with:

```bash
vagrant up
```

This boots the VM (if already created), and typically starts within a minute. To access it:

```bash
vagrant ssh
```

You're now inside the VM. Clear the screen with:

```bash
clear
```

### üß∞ Essential Linux Commands

Here are some basic commands to get started:

```bash
whoami     # Displays the current user
pwd        # Prints the working directory
ls         # Lists contents of the directory
cat /etc/os-release   # Displays OS name and version
```

You're logged in as the `vagrant` user, whose home directory is `/home/vagrant`.

### üí° Understanding the Terminal Prompt

```bash
[vagrant@localhost ~]$
```

The command prompt tells you:

- **User**: `vagrant`
- **Host**: Usually `localhost`
- **~ (tilde)**: Represents home directory
- **$**: Indicates a regular user shell

### üîê Becoming the Root User

To switch to the root user:

```bash
sudo -i
```

This updates your prompt:

```bash
[root@localhost ~]#
```

- **User**: `root`
- **~**: Now refers to `/root` (root's home directory)
- **#**: Indicates root privileges

Check with:

```bash
whoami   # root
pwd      # /root
```

### üìÇ `/` vs `/root` ‚Äî What's the Difference?

- `/` ‚Üí The **root directory**, top of the Linux filesystem hierarchy.
- `/root` ‚Üí The **home directory of the root user**.

Examples:

```bash
cd /      # Takes you to root directory
cd        # Brings you back to the user's home directory
```

Use `ls` in `/` to list all top-level directories.

### üó∫Ô∏è Linux File System Layout

```bash
[root@vbox /]# ls

afs  boot  etc   lib    media  opt   root  sbin  sys  usr      var
bin  dev   home  lib64  mnt    proc  run   srv   tmp  vagrant
```

Here‚Äôs an overview of key directories:

| Directory        | Description                                             |
| ---------------- | ------------------------------------------------------- |
| `/`              | Root of the entire filesystem                           |
| `/home`          | Home directories for regular users                      |
| `/root`          | Home directory of the root user                         |
| `/bin`           | Essential user commands (e.g. `ls`, `mv`, `pwd`)        |
| `/sbin`          | System-level commands (for root, e.g. `reboot`, `mkfs`) |
| `/etc`           | System configuration files                              |
| `/tmp`           | Temporary files (deleted after reboot)                  |
| `/boot`          | Kernel and bootloader files                             |
| `/var`, `/srv`   | Logs and server-specific data                           |
| `/proc`, `/sys`  | Dynamic system information                              |
| `/opt`           | Optional third-party software                           |
| `/media`, `/mnt` | Mount points for external or temporary filesystems      |

### üîé Exploring Common Directories

#### View Current Hostname

```bash
cat /etc/hostname
```

#### Boot Directory Contents

```bash
cd /boot
ls
```

You'll find kernel files like `vmlinuz`, `initramfs`, and the `grub` directory here.

#### Temporary Files

```bash
cd /tmp
ls
```

Use this directory only for short-term storage. It's wiped after reboot.

#### System Info in `/proc`

```bash
cd /proc
ls
cat uptime        # System uptime
free -m           # Memory usage
```

Files in `/proc` are dynamic and update in real-time based on the system state.

### üõ§Ô∏è Absolute vs Relative Paths

- **Absolute Path**: Starts from root (`/`)  
  Example: `/etc/hostname`, `/bin/ls`
- **Relative Path**: Based on current directory  
  Example: `cd ../`, `ls foldername/`

Use `cd /` anytime to go to the root directory, or `cd` alone to return to your home directory.

### üîÅ Switching Between Users and Logging Out

To become the **root user**:

```bash
sudo -i
```

Your prompt will change (`#` instead of `$`), indicating root access.

To **exit root** and return to the `vagrant` user:

```bash
exit
```

To **log out of the VM entirely**, just run `exit` again. You‚Äôll be back on your **host machine** (e.g., Windows). You can reconnect anytime with:

```bash
vagrant ssh
```

### üóÇÔ∏è Creating Directories and Files

Start in the home directory (`/home/vagrant`):

```bash
cd ~   # or simply cd
```

Create directories:

```bash
mkdir dev ops backupdir
```

Create a single file:

```bash
touch testfile.txt
```

Create multiple files using brace expansion:

```bash
touch devopsfile{1..10}.txt
```

This generates 10 files: `devopsfile1.txt` to `devopsfile10.txt`.

### üìã Copying Files and Understanding Paths

Copy a file using **relative paths**: `cp <source> <destination>`

```bash
cp devopsfile1.txt dev/
```

Now check the contents:

```bash
ls dev/
```

You can also use **absolute paths**:

```bash
cp /home/vagrant/devopsfile2.txt /home/vagrant/dev/
```

Using absolute paths helps reinforce your understanding of Linux file structure.

### üìÅ Copying Directories

Attempting to copy a directory without the right option fails:

```bash
cp dev backupdir/
# Error: omitting directory
```

To copy directories, use the `-r` (recursive) flag:

```bash
cp -r dev backupdir/
```

Now `dev` is successfully copied into `backupdir`.

### üî§ Path Shortcuts

- `cd` or `cd ~` ‚Üí takes you to your home directory
- `cd /` ‚Üí takes you to the root directory
- Use `ls` with either **relative** or **absolute paths** to list contents

Example:

```bash
ls dev/                   # Relative
ls /home/vagrant/dev      # Absolute
```

### üß± Linux Command Syntax

Most Linux commands follow this pattern:

```
command [options] [arguments]
```

Examples:

- `ls -l /tmp` ‚Üí long listing of `/tmp`
- `cp -r dev backupdir/` ‚Üí copy directory recursively

To view available options for any command:

```bash
cp --help
```

You‚Äôll see a list of flags like:

- `-a` ‚Üí archive
- `-i` ‚Üí interactive
- `-r` / `-R` / `--recursive` ‚Üí recursive copy

### ‚úÇÔ∏è Moving and Renaming Files or Directories

Move a file:

```bash
mv devopsfile3.txt ops/
```

Move a directory:

```bash
mv ops dev/
```

Rename a file:

```bash
mv testfile.txt testfile_renamed.txt
```

### ‚ú® Wildcards and Bulk Operations

To move all `.txt` files into a directory:

```bash
mkdir textdir
mv *.txt textdir/
```

Wildcard `*` matches everything in the current directory.

### üóëÔ∏è Removing Files and Directories

Delete a single file:

```bash
rm devopsfile10.txt
```

Delete a directory:

```bash
rm -r mobile/
```

Delete everything in the current directory:

‚ö†Ô∏è **Warning: Dangerous!**

```bash
rm -rf *
```

This removes **all files and folders** in the current location **without confirmation**. If run in critical system directories, data loss is permanent. There's **no recycle bin** in Linux.

### üïò View Command History

Check all previous commands:

```bash
history
```

Use this to review and repeat past commands during practice. That wraps up our session on **basic Linux commands and file system navigation**. Practice using absolute paths, directory operations, and file manipulations until they become second nature.

---

## 3. üß© Getting Started with the Vim Editor on CentOS

In this section, we‚Äôll get hands-on with the **Vim** editor ‚Äî a powerful text editor that you‚Äôll be using throughout this course to create and modify files.

> üí° If you're already comfortable with another editor like **Nano**, feel free to use that. But if you're new to Linux text editors, **Vim** is a great place to start.

### Installing Vim on CentOS

By default, **Vim** is not installed on CentOS; however, **Vi** (a simpler version) is usually available. Since Vim is an enhanced version of Vi, let‚Äôs start by installing it:

```bash
sudo yum install vim -y
```

> If you encounter any issues during installation (e.g., network errors), don‚Äôt spend too much time troubleshooting. Simply recreate your VM or switch to an **Ubuntu** VM, where Vim is pre-installed. We'll learn more about networking with Vagrant later in the course.

### Basic Vim Operations

Let‚Äôs walk through the basics of using Vim to create, edit, save, and quit files.

#### 1. Opening a File

To create or open a file, use:

```bash
vim firstfile.txt
```

The `.txt` extension is optional ‚Äî it's just for readability.

#### 2. Vim Modes

Vim has **three modes**:

- **Command Mode**: Default mode when you open a file.
- **Insert Mode**: For writing and editing content. Enter this by pressing `i`.
- **Extended Mode**: For commands like saving or quitting. Access this by pressing `Esc` followed by `:`.

#### 3. Writing and Saving

1. Press `i` to enter **Insert Mode**.
2. Type your content:
   ```
   Welcome to Linux.
   I hope you enjoy learning the command line!
   ```
3. Press `Esc` to return to **Command Mode**.
4. Enter `:w` to **save** the file.
5. To quit, use `:q`.
6. To save and quit in one go: `:wq`.

#### 4. Quitting Without Saving

If you've made changes you don't want to keep:

```bash
:q!
```

This **force quits** without saving.

### Navigating Inside Vim

Use these shortcuts for efficient navigation:

- `:set nu` ‚Äì Show line numbers
- `gg` ‚Äì Go to the beginning of the file
- `G` ‚Äì Go to the end of the file
- `w` ‚Äì Move cursor forward one word
- `5w` ‚Äì Move cursor 5 words forward
- `b` ‚Äì Move back one word
- `nb` ‚Äì Move back N words (like `5b`)

### Copy, Paste, and Delete in Vim

#### Copying (Yanking)

- `yy` ‚Äì Copy current line
- `4yy` ‚Äì Copy 4 lines from the current line
- `p` ‚Äì Paste below the cursor
- `P` ‚Äì Paste above the cursor

#### Cutting (Deleting)

- `dd` ‚Äì Delete (cut) current line
- `4dd` ‚Äì Delete (cut) 4 lines
- `u` ‚Äì Undo last change
- `U` ‚Äì Undo all changes (entire line)
- `CTRL + R` ‚Äì Redo

> Deleting in Vim is essentially a **cut** operation. You can paste it using `p` or `P`.

#### Deleting All Lines

```bash
117dd
```

(Deletes 117 lines, assuming that's your total line count)

Undo with `u` or quit without saving with `:q!`.

### Searching in Vim

To search for a word:

1. Press `/` in **Command Mode**
2. Type the word (e.g., `/network`)
3. Press `Enter`
4. Use `n` to jump to the next match

> Search is **case-sensitive** by default.

Vim is an extremely powerful tool once you‚Äôre comfortable with it. In upcoming sessions, we‚Äôll build on these fundamentals with more advanced features.

> üí™ **Pro Tip**: Practice is key. Use Vim as much as possible during this course to build muscle memory.

---

## 4. üèóÔ∏è Understanding File Types in Linux

In this section, we‚Äôll explore the different types of files in Linux. You might already know about basic file types like **text files** and **directories**, but in Linux, **everything is treated as a file**‚Äîyour keyboard, mouse, terminal sessions, and more.

Let‚Äôs dive deeper.

### File Identification with `ls -l`

```bash
ls -l /dev
```

When you run the `ls -l` command, it shows a **long listing** format. The first character in the output reveals the **file type**:

- `-` : Regular file (can be text or binary)
- `d` : Directory
- `l` : Symbolic (soft) link
- `c` : Character device file (e.g., keyboard, tty)
- `b` : Block device file (e.g., hard disks)
- `s` : Socket file (used for inter-process communication)
- `p` : Named pipe (FIFO)

The color coding in tools like Git Bash can help, but it's the first character of the `ls -l` output that truly defines the type.

### Identifying File Content with `file`

To confirm if a file is a text file, script, or binary, use the `file` command:

```bash
file filename
```

Examples:

```bash
file /bin/pwd        # Outputs: ELF 64-bit LSB executable (binary)
file yum             # Outputs: Python script or ASCII text
```

### Exploring Special Files

Check out the `/dev` directory using `ls -l /dev`. You‚Äôll see:

- **Character files (c)** ‚Äì e.g., `/dev/tty` for terminal sessions
- **Block files (b)** ‚Äì e.g., `/dev/sda` for hard disks

These are device files, used by the kernel for hardware I/O.

### Working with Symbolic Links

You can create shortcuts using symbolic (soft) links:

```bash
ln -s /path/to/original /path/to/link
```

First create the directory ` mkdir -p /opt/dev/ops/devops/test/`. Create the file `vim /opt/dev/ops/devops/test/commands.txt`.

Example of creating symbolic link:

```bash
ln -s /opt/dev/ops/devops/test/commands.txt cmds
```

This creates a `cmds` shortcut to a deeply nested file, see `file cmds`. Check file content using `cat cmds`. If the original file is deleted or moved (e.g., `mv /opt/dev/ops/devops/test/commands.txt /tmp/`), the link becomes a **dead link** (it will appear broken in `ls -l`).

To remove a link:

```bash
rm linkname
# or
unlink linkname
```

### Sorting with `ls`

The `ls` command can be enhanced with useful flags:

- `-l` : Long listing format
- `-t` : Sort by modification time
- `-r` : Reverse the sort order

Example:

```bash
ls -ltr /etc
```

This shows the contents of `/etc`, sorted by last modification time in reverse‚Äîuseful for tracking recent changes.

### Changing Hostname (Example Use Case)

To change the hostname on a CentOS system:

1. Edit the `/etc/hostname` file:
   ```bash
   vim /etc/hostname
   ```
   Update it to:
   ```
   centos.devops.in
   ```
2. Save and quit, then run:
   ```bash
   $ hostname
   ```
   It should reflect the new name.
3. Re-login to see the new hostname applied in the terminal.

### Viewing Command History

- For the current user:
  ```bash
  history
  ```
- For root:
  ```bash
  sudo -i
  history
  ```

---

## 5. üèó Filtering and Redirection in Linux: A System Admin‚Äôs Best Friend

# TO-DO FROM HERE

One of the most powerful aspects of working in Linux is the ability to **filter data** and **redirect outputs** with ease. If you're aiming to be efficient and smart in Linux, mastering these skills is essential‚Äîespecially for scripting and system administration tasks.

In this section, we'll explore a variety of **filtering commands** and **I/O redirection techniques** that are widely used in daily operations:

### üîç Filtering with `grep`, `cut`, and `awk`

- Use the `grep` command to search for text within files. Add `-i` to ignore case sensitivity, or `-R` to search recursively through directories.
- Want to see what‚Äôs _not_ there? Use `grep -v` to exclude matches.
- Use `cut` when dealing with structured data separated by delimiters (like `:` or `,`). It's perfect for extracting specific columns from files like `/etc/passwd`.
- When `cut` isn‚Äôt flexible enough, turn to `awk`. It‚Äôs a powerful tool for pattern scanning and processing, letting you apply logic and regex for complex filtering.

### üìñ Viewing Files with `less`, `more`, `head`, and `tail`

- Use `less` for interactive reading‚Äîyou can scroll and search within the file.
- `more` is a simpler alternative but with limited navigation.
- Want to preview the start or end of a file? Use `head` and `tail`. Need real-time updates (great for logs)? Add `tail -f`.

### üß™ Real-Time Log Monitoring

System logs are vital for troubleshooting. Use:

```bash
tail -f /var/log/messages
```

to follow system logs as events happen‚Äîperfect when reproducing issues or monitoring login attempts.

### ‚úÇÔ∏è Text Manipulation with `sed` and `vim`

- Use `vim` for in-file search and replace:
  ```
  :%s/coronavirus/covid-19/g
  ```
  Add `/g` for global replacement on all matches.
- Prefer automation? Use `sed` for batch replacements across files:
  ```bash
  sed 's/coronavirus/covid-19/g' filename.txt
  ```
  Add `-i` to modify files in place.

### üîÅ Redirection and Piping

- Redirect output using:
  - `>` to overwrite a file
  - `>>` to append to a file
  - `2>` to redirect errors
  - `&>` to redirect both standard output and errors
- Chain commands using pipes (`|`). For example:
  ```bash
  grep firewall *.cfg | less
  ```
  This filters the files and sends the output to a reader.

---

## 6.

---

## 7.

---
